if(window.XMLHttpRequest&&!(window.FileAPI&&FileAPI.shouldLoad)){window.XMLHttpRequest.prototype.setRequestHeader=(function(b){return function(e,a){if(e==="__setXHR_"){var f=a(this);if(f instanceof Function){f(this)}}else{b.apply(this,arguments)}}})(window.XMLHttpRequest.prototype.setRequestHeader)}var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13";ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(j,h,m){var n=this;n.promisesCount=0;this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var i=this.isResumeSupported();function l(d){d.method=d.method||"POST";d.headers=d.headers||{};var f=d._deferred=d._deferred||h.defer();var a=f.promise;function b(g){if(f.notify){f.notify(g)}if(a.progressFunc){m(function(){a.progressFunc(g)})}}function e(g){if(d._start!=null&&i){return{loaded:g.loaded+d._start,total:(d._file&&d._file.size)||g.total,type:g.type,config:d,lengthComputable:true,target:g.target}}else{return g}}if(!d.disableProgress){d.headers.__setXHR_=function(){return function(g){if(!g||!g.upload||!g.upload.addEventListener){return}d.__XHR=g;if(d.xhrFn){d.xhrFn(g)}g.upload.addEventListener("progress",function(p){p.config=d;b(e(p))},false);g.upload.addEventListener("load",function(p){if(p.lengthComputable){p.config=d;b(e(p))}},false)}}}function c(){j(d).then(function(g){if(i&&d._chunkSize&&!d._finished&&d._file){var p=d._file&&d._file.size||0;b({loaded:Math.min(d._end,p),total:p,config:d,type:"progress"});n.upload(d,true)}else{if(d._finished){delete d._finished}f.resolve(g)}},function(g){f.reject(g)},function(g){f.notify(g)})}if(!i){c()}else{if(d._chunkSize&&d._end&&!d._finished){d._start=d._end;d._end+=d._chunkSize;c()}else{if(d.resumeSizeUrl){j.get(d.resumeSizeUrl).then(function(g){if(d.resumeSizeResponseReader){d._start=d.resumeSizeResponseReader(g.data)}else{d._start=parseInt((g.data.size==null?g.data:g.data.size).toString())}if(d._chunkSize){d._end=d._start+d._chunkSize}c()},function(g){throw g})}else{if(d.resumeSize){d.resumeSize().then(function(g){d._start=g;if(d._chunkSize){d._end=d._start+d._chunkSize}c()},function(g){throw g})}else{if(d._chunkSize){d._start=0;d._end=d._start+d._chunkSize}c()}}}}a.success=function(g){a.then(function(p){g(p.data,p.status,p.headers,d)});return a};a.error=function(g){a.then(null,function(p){g(p.data,p.status,p.headers,d)});return a};a.progress=function(g){a.progressFunc=g;a.then(null,null,function(p){g(p)});return a};a.abort=a.pause=function(){if(d.__XHR){m(function(){d.__XHR.abort()})}return a};a.xhr=function(g){d.xhrFn=(function(p){return function(){if(p){p.apply(a,arguments)}g.apply(a,arguments)}})(d.xhrFn);return a};n.promisesCount++;if(a["finally"]&&a["finally"] instanceof Function){a["finally"](function(){n.promisesCount--})}return a}this.isUploadInProgress=function(){return n.promisesCount>0};this.rename=function(a,b){a.ngfName=b;return a};this.jsonBlob=function(a){if(a!=null&&!angular.isString(a)){a=JSON.stringify(a)}var b=new window.Blob([a],{type:"application/json"});b._ngfBlob=true;return b};this.json=function(a){return angular.toJson(a)};function k(b){var a={};for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}return a}this.isFile=function(a){return a!=null&&(a instanceof window.Blob||(a.flashId&&a.name&&a.size))};this.upload=function(d,e){function b(f,p){if(f._ngfBlob){return f}d._file=d._file||f;if(d._start!=null&&i){if(d._end&&d._end>=f.size){d._finished=true;d._end=f.size}var g=f.slice(d._start,d._end||f.size);g.name=f.name;g.ngfName=f.ngfName;if(d._chunkSize){p.append("_chunkSize",d._chunkSize);p.append("_currentChunkSize",d._end-d._start);p.append("_chunkNumber",Math.floor(d._start/d._chunkSize));p.append("_totalSize",d._file.size)}return g}return f}function c(t,g,u){if(g!==undefined){if(angular.isDate(g)){g=g.toISOString()}if(angular.isString(g)){t.append(u,g)}else{if(n.isFile(g)){var v=b(g,t);var w=u.split(",");if(w[1]){v.ngfName=w[1].replace(/^\s+|\s+$/g,"");u=w[0]}d._fileKey=d._fileKey||u;t.append(u,v,v.ngfName||v.name)}else{if(angular.isObject(g)){if(g.$$ngfCircularDetection){throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+u}g.$$ngfCircularDetection=true;try{for(var f in g){if(g.hasOwnProperty(f)&&f!=="$$ngfCircularDetection"){var x=d.objectKey==null?"[i]":d.objectKey;if(g.length&&parseInt(f)>-1){x=d.arrayKey==null?x:d.arrayKey}c(t,g[f],u+x.replace(/[ik]/g,f))}}}finally{delete g.$$ngfCircularDetection}}else{t.append(u,g)}}}}}function a(){d._chunkSize=n.translateScalars(d.resumeChunkSize);d._chunkSize=d._chunkSize?parseInt(d._chunkSize.toString()):null;d.headers=d.headers||{};d.headers["Content-Type"]=undefined;d.transformRequest=d.transformRequest?(angular.isArray(d.transformRequest)?d.transformRequest:[d.transformRequest]):[];d.transformRequest.push(function(r){var q=new window.FormData(),f;r=r||d.fields||{};if(d.file){r.file=d.file}for(f in r){if(r.hasOwnProperty(f)){var g=r[f];if(d.formDataAppender){d.formDataAppender(q,f,g)}else{c(q,g,f)}}}return q})}if(!e){d=k(d)}if(!d._isDigested){d._isDigested=true;a()}return l(d)};this.http=function(a){a=k(a);a.transformRequest=a.transformRequest||function(b){if((window.ArrayBuffer&&b instanceof window.ArrayBuffer)||b instanceof window.Blob){return b}return j.defaults.transformRequest[0].apply(this,arguments)};a._chunkSize=n.translateScalars(a.resumeChunkSize);a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null;return l(a)};this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2){return parseFloat(a.substring(0,a.length-2)*1024)}else{if(a.search(/mb/i)===a.length-2){return parseFloat(a.substring(0,a.length-2)*1048576)}else{if(a.search(/gb/i)===a.length-2){return parseFloat(a.substring(0,a.length-2)*1073741824)}else{if(a.search(/b/i)===a.length-1){return parseFloat(a.substring(0,a.length-1))}else{if(a.search(/s/i)===a.length-1){return parseFloat(a.substring(0,a.length-1))}else{if(a.search(/m/i)===a.length-1){return parseFloat(a.substring(0,a.length-1)*60)}else{if(a.search(/h/i)===a.length-1){return parseFloat(a.substring(0,a.length-1)*3600)}}}}}}}}return a};this.urlToBlob=function(b){var a=h.defer();j({url:b,method:"get",responseType:"arraybuffer"}).then(function(g){var d=new Uint8Array(g.data);var e=g.headers("content-type")||"image/WebP";var f=new window.Blob([d],{type:e});var c=b.match(/.*\/(.+?)(\?.*)?$/);if(c.length>1){f.name=c[1]}a.resolve(f)},function(c){a.reject(c)});return a.promise};this.setDefaults=function(a){this.defaults=a||{}};this.defaults={};this.version=ngFileUpload.version}]);ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(p,q,n,l,o){var j=o;j.getAttrWithDefaults=function(c,b){if(c[b]!=null){return c[b]}var a=j.defaults[b];return(a==null?a:(angular.isString(a)?a:JSON.stringify(a)))};j.attrGetter=function(b,d,a,e){var c=this.getAttrWithDefaults(d,b);if(a){try{if(e){return p(c)(a,e)}else{return p(c)(a)}}catch(f){if(b.search(/min|max|pattern/i)){return c}else{throw f}}}else{return c}};j.shouldUpdateOn=function(b,d,c){var a=j.attrGetter("ngfModelOptions",d,c);if(a&&a.updateOn){return a.updateOn.split(" ").indexOf(b)>-1}return true};j.emptyPromise=function(){var a=l.defer();var b=arguments;q(function(){a.resolve.apply(a,b)});return a.promise};j.rejectPromise=function(){var a=l.defer();var b=arguments;q(function(){a.reject.apply(a,b)});return a.promise};j.happyPromise=function(a,c){var b=l.defer();a.then(function(d){b.resolve(d)},function(d){q(function(){throw d});b.resolve(c)});return b.promise};function m(a,d,b){var c=[j.emptyPromise()];angular.forEach(a,function(e,f){if(e.type.indexOf("image/jpeg")===0&&j.attrGetter("ngfFixOrientation",d,b,{$file:e})){c.push(j.happyPromise(j.applyExifRotation(e),e).then(function(g){a.splice(f,1,g)}))}});return l.all(c)}function k(a,c,b,e){var d=j.attrGetter("ngfResize",c,b);if(!d||!j.isResizeSupported()||!a.length){return j.emptyPromise()}if(d instanceof Function){var f=l.defer();return d(a).then(function(g){r(g,a,c,b,e).then(function(h){f.resolve(h)},function(h){f.reject(h)})},function(g){f.reject(g)})}else{return r(d,a,c,b,e)}}function r(e,g,d,h,f){var a=[j.emptyPromise()];function c(u,v){if(u.type.indexOf("image")===0){if(e.pattern&&!j.validatePattern(u,e.pattern)){return}e.resizeIf=function(s,t){return j.attrGetter("ngfResizeIf",d,h,{$width:s,$height:t,$file:u})};var i=j.resize(u,e);a.push(i);i.then(function(s){g.splice(v,1,s)},function(s){u.$error="resize";(u.$errorMessages=(u.$errorMessages||{})).resize=true;u.$errorParam=(s?(s.message?s.message:s)+": ":"")+(u&&u.name);f.$ngfValidations.push({name:"resize",valid:false});j.applyModelValidation(f,g)})}}for(var b=0;b<g.length;b++){c(g[b],b)}return l.all(a)}j.updateModel=function(h,c,O,P,K,g,L){function J(v,s,u,t,x){c.$$ngfPrevValidFiles=v;c.$$ngfPrevInvalidFiles=s;var y=v&&v.length?v[0]:null;var z=s&&s.length?s[0]:null;if(h){j.applyModelValidation(h,v);h.$setViewValue(x?y:v)}if(P){p(P)(O,{$files:v,$file:y,$newFiles:u,$duplicateFiles:t,$invalidFiles:s,$invalidFile:z,$event:g})}var w=j.attrGetter("ngfModelInvalid",c);if(w){q(function(){p(w).assign(O,x?z:s)})}q(function(){})}var H,e=[],f,b,F=[],N=[];function E(){function s(w,v){return w.name===v.name&&(w.$ngfOrigSize||w.size)===(v.$ngfOrigSize||v.size)&&w.type===v.type}function u(v){var w;for(w=0;w<f.length;w++){if(s(v,f[w])){return true}}for(w=0;w<b.length;w++){if(s(v,b[w])){return true}}return false}if(K){H=[];e=[];for(var t=0;t<K.length;t++){if(u(K[t])){e.push(K[t])}else{H.push(K[t])}}}}function a(s){return angular.isArray(s)?s:[s]}function i(){function s(){q(function(){J(I?f.concat(N):N,I?b.concat(F):F,K,e,d)},M&&M.debounce?M.debounce.change||M.debounce:0)}var t=G?H:N;k(t,c,O,h).then(function(){if(G){j.validate(H,I?f.length:0,h,c,O).then(function(u){N=u.validsFiles;F=u.invalidsFiles;s()})}else{s()}},function(){for(var v=0;v<t.length;v++){var u=t[v];if(u.$error==="resize"){var w=N.indexOf(u);if(w>-1){N.splice(w,1);F.push(u)}s()}}})}f=c.$$ngfPrevValidFiles||[];b=c.$$ngfPrevInvalidFiles||[];if(h&&h.$modelValue){f=a(h.$modelValue)}var I=j.attrGetter("ngfKeep",c,O);H=(K||[]).slice(0);if(I==="distinct"||j.attrGetter("ngfKeepDistinct",c,O)===true){E(c,O)}var d=!I&&!j.attrGetter("ngfMultiple",c,O)&&!j.attrGetter("multiple",c);if(I&&!H.length){return}j.attrGetter("ngfBeforeModelChange",c,O,{$files:K,$file:K&&K.length?K[0]:null,$newFiles:H,$duplicateFiles:e,$event:g});var G=j.attrGetter("ngfValidateAfterResize",c,O);var M=j.attrGetter("ngfModelOptions",c,O);j.validate(H,I?f.length:0,h,c,O).then(function(s){if(L){J(H,[],K,e,d)}else{if((!M||!M.allowInvalid)&&!G){N=s.validFiles;F=s.invalidFiles}else{N=H}if(j.attrGetter("ngfFixOrientation",c,O)&&j.isExifSupported()){m(N,c,O).then(function(){i()})}else{i()}}})};return j}]);ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(j,k,l,h){var m=[];function n(a){var c=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(c&&c.length>2){var b=h.defaults.androidFixMinorVersion||4;return parseInt(c[1])<4||(parseInt(c[1])===b&&parseInt(c[2])<b)}return a.indexOf("Chrome")===-1&&/.*Windows.*Safari.*/.test(a)}function i(R,b,f,K,O,H,c,a){var N=function(p,o){return a.attrGetter(p,f,o)};function g(){return b[0].tagName.toLowerCase()==="input"&&f.type&&f.type.toLowerCase()==="file"}function F(){return N("ngfChange")||N("ngfSelect")}function Q(r){if(a.shouldUpdateOn("change",f,R)){var q=r.__files_||(r.target&&r.target.files),o=[];if(!q){return}for(var p=0;p<q.length;p++){o.push(q[p])}a.updateModel(K,f,R,F(),o.length?o:null,r)}}a.registerModelChangeValidator(K,f,R);var D=[];if(N("ngfMultiple")){D.push(R.$watch(N("ngfMultiple"),function(){d.attr("multiple",N("ngfMultiple",R))}))}if(N("ngfCapture")){D.push(R.$watch(N("ngfCapture"),function(){d.attr("capture",N("ngfCapture",R))}))}if(N("ngfAccept")){D.push(R.$watch(N("ngfAccept"),function(){d.attr("accept",N("ngfAccept",R))}))}D.push(f.$observe("accept",function(){d.attr("accept",N("accept"))}));function I(s,r){function p(t){s.attr("id","ngf-"+t);r.attr("id","ngf-label-"+t)}for(var q=0;q<b[0].attributes.length;q++){var o=b[0].attributes[q];if(o.name!=="type"&&o.name!=="class"&&o.name!=="style"){if(o.name==="id"){p(o.value);D.push(f.$observe("id",p))}else{s.attr(o.name,(!o.value&&(o.name==="required"||o.name==="multiple"))?o.name:o.value)}}}}function M(){if(g()){return b}var p=angular.element('<input type="file">');var o=angular.element("<label>upload</label>");o.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1");I(p,o);m.push({el:b,ref:o});document.body.appendChild(o.append(p)[0]);return p}function L(q){if(b.attr("disabled")){return false}if(N("ngfSelectDisabled",R)){return}var p=P(q);if(p!=null){return p}e(q);try{if(!g()&&!document.body.contains(d[0])){m.push({el:b,ref:d.parent()});document.body.appendChild(d.parent()[0]);d.bind("change",Q)}}catch(o){}if(n(navigator.userAgent)){setTimeout(function(){d[0].click()},0)}else{d[0].click()}return false}var J=0;var G=0;function P(q){var o=q.changedTouches||(q.originalEvent&&q.originalEvent.changedTouches);if(o){if(q.type==="touchstart"){G=o[0].clientX;J=o[0].clientY;return true}else{if(q.type==="touchend"){var p=o[0].clientX;var r=o[0].clientY;if((Math.abs(p-G)>20)||(Math.abs(r-J)>20)){q.stopPropagation();q.preventDefault();return false}}return true}}}var d=b;function e(o){if(a.shouldUpdateOn("click",f,R)&&d.val()){d.val(null);a.updateModel(K,f,R,F(),null,o,true)}}if(!g()){d=M()}d.bind("change",Q);if(!g()){b.bind("click touchstart touchend",L)}else{b.bind("click",e)}function E(p){if(d&&!d.attr("__ngf_ie10_Fix_")){if(!d[0].parentNode){d=null;return}p.preventDefault();p.stopPropagation();d.unbind("click");var o=d.clone();d.replaceWith(o);d=o;d.attr("__ngf_ie10_Fix_","true");d.bind("change",Q);d.bind("click",E);d[0].click();return false}else{d.removeAttr("__ngf_ie10_Fix_")}}if(navigator.appVersion.indexOf("MSIE 10")!==-1){d.bind("click",E)}if(K){K.$formatters.push(function(o){if(o==null||o.length===0){if(d.val()){d.val(null)}}return o})}R.$on("$destroy",function(){if(!g()){d.parent().remove()}angular.forEach(D,function(o){o()})});H(function(){for(var p=0;p<m.length;p++){var o=m[p];if(!document.body.contains(o.el[0])){m.splice(p,1);o.ref.remove()}}});if(window.FileAPI&&window.FileAPI.ngfFixIE){window.FileAPI.ngfFixIE(b,d,Q)}}return{restrict:"AEC",require:"?ngModel",link:function(c,b,d,a){i(c,b,d,a,j,k,l,h)}}}]);(function(){ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,h){var g=a;g.base64DataUrl=function(j){if(angular.isArray(j)){var e=h.defer(),f=0;angular.forEach(j,function(i){g.dataUrl(i,true)["finally"](function(){f++;if(f===j.length){var l=[];angular.forEach(j,function(k){l.push(k.$ngfDataUrl)});e.resolve(l,j)}})});return e.promise}else{return g.dataUrl(j,true)}};g.dataUrl=function(k,f){if(!k){return g.emptyPromise(k,k)}if((f&&k.$ngfDataUrl!=null)||(!f&&k.$ngfBlobUrl!=null)){return g.emptyPromise(f?k.$ngfDataUrl:k.$ngfBlobUrl,k)}var e=f?k.$$ngfDataUrlPromise:k.$$ngfBlobUrlPromise;if(e){return e}var l=h.defer();b(function(){if(window.FileReader&&k&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 8")===-1||k.size<20000)&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 9")===-1||k.size<4000000)){var o=window.URL||window.webkitURL;if(o&&o.createObjectURL&&!f){var i;try{i=o.createObjectURL(k)}catch(p){b(function(){k.$ngfBlobUrl="";l.reject()});return}b(function(){k.$ngfBlobUrl=i;if(i){l.resolve(i,k);g.blobUrls=g.blobUrls||[];g.blobUrlsTotalSize=g.blobUrlsTotalSize||0;g.blobUrls.push({url:i,size:k.size});g.blobUrlsTotalSize+=k.size||0;var n=g.defaults.blobUrlsMaxMemory||268435456;var r=g.defaults.blobUrlsMaxQueueSize||200;while((g.blobUrlsTotalSize>n||g.blobUrls.length>r)&&g.blobUrls.length>1){var m=g.blobUrls.splice(0,1)[0];o.revokeObjectURL(m.url);g.blobUrlsTotalSize-=m.size}}})}else{var j=new FileReader();j.onload=function(m){b(function(){k.$ngfDataUrl=m.target.result;l.resolve(m.target.result,k);b(function(){delete k.$ngfDataUrl},1000)})};j.onerror=function(){b(function(){k.$ngfDataUrl="";l.reject()})};j.readAsDataURL(k)}}else{b(function(){k[f?"$ngfDataUrl":"$ngfBlobUrl"]="";l.reject()})}});if(f){e=k.$$ngfDataUrlPromise=l.promise}else{e=k.$$ngfBlobUrlPromise=l.promise}e["finally"](function(){delete k[f?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]});return e};return g}]);function c(a){if(a.tagName.toLowerCase()==="img"){return"image"}if(a.tagName.toLowerCase()==="audio"){return"audio"}if(a.tagName.toLowerCase()==="video"){return"video"}return/./}function d(p,r,a,q,m,o,n,l){function b(f){var e=p.attrGetter("ngfNoObjectUrl",m,a);p.dataUrl(f,e)["finally"](function(){r(function(){var g=(e?f.$ngfDataUrl:f.$ngfBlobUrl)||f.$ngfDataUrl;if(l){q.css("background-image","url('"+(g||"")+"')")}else{q.attr("src",g)}if(g){q.removeClass("ng-hide")}else{q.addClass("ng-hide")}})})}r(function(){var e=a.$watch(m[o],function(h){var f=n;if(o==="ngfThumbnail"){if(!f){f={width:q[0].naturalWidth||q[0].clientWidth,height:q[0].naturalHeight||q[0].clientHeight}}if(f.width===0&&window.getComputedStyle){var g=getComputedStyle(q[0]);if(g.width&&g.width.indexOf("px")>-1&&g.height&&g.height.indexOf("px")>-1){f={width:parseInt(g.width.slice(0,-2)),height:parseInt(g.height.slice(0,-2))}}}}if(angular.isString(h)){q.removeClass("ng-hide");if(l){return q.css("background-image","url('"+h+"')")}else{return q.attr("src",h)}}if(h&&h.type&&h.type.search(c(q[0]))===0&&(!l||h.type.indexOf("image")===0)){if(f&&p.isResizeSupported()){f.resizeIf=function(i,j){return p.attrGetter("ngfResizeIf",m,a,{$width:i,$height:j,$file:h})};p.resize(h,f).then(function(i){b(i)},function(i){throw i})}else{b(h)}}else{q.addClass("ng-hide")}});a.$on("$destroy",function(){e()})})}ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(b,a){return{restrict:"AE",link:function(i,h,j){d(b,a,i,h,j,"ngfSrc",b.attrGetter("ngfResize",j,i),false)}}}]);ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(b,a){return{restrict:"AE",link:function(i,h,j){d(b,a,i,h,j,"ngfBackground",b.attrGetter("ngfResize",j,i),true)}}}]);ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(b,a){return{restrict:"AE",link:function(j,i,l){var k=b.attrGetter("ngfSize",l,j);d(b,a,j,i,l,"ngfThumbnail",k,b.attrGetter("ngfAsBackground",l,j))}}}]);ngFileUpload.config(["$compileProvider",function(a){if(a.imgSrcSanitizationWhitelist){a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}if(a.aHrefSanitizationWhitelist){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}}]);ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(l,j,k){if(angular.isString(l)){return b.trustAsResourceUrl(l)}var i=l&&((j?l.$ngfDataUrl:l.$ngfBlobUrl)||l.$ngfDataUrl);if(l&&!i){if(!l.$ngfDataUrlFilterInProgress&&angular.isObject(l)){l.$ngfDataUrlFilterInProgress=true;a.dataUrl(l,j)}return""}if(l){delete l.$ngfDataUrlFilterInProgress}return(l&&i?(k?b.trustAsResourceUrl(i):i):l)||""}}])})();ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(i,h,l){var g=i;function j(b){var c="",a=[];if(b.length>2&&b[0]==="/"&&b[b.length-1]==="/"){c=b.substring(1,b.length-1)}else{var e=b.split(",");if(e.length>1){for(var f=0;f<e.length;f++){var d=j(e[f]);if(d.regexp){c+="("+d.regexp+")";if(f<e.length-1){c+="|"}}else{a=a.concat(d.excludes)}}}else{if(b.indexOf("!")===0){a.push("^((?!"+j(b.substring(1)).regexp+").)*$")}else{if(b.indexOf(".")===0){b="*"+b}c="^"+b.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$";c=c.replace(/\\\*/g,".*").replace(/\\\?/g,".")}}}return{regexp:c,excludes:a}}g.validatePattern=function(e,a){if(!a){return true}var b=j(a),d=true;if(b.regexp&&b.regexp.length){var c=new RegExp(b.regexp,"i");d=(e.type!=null&&c.test(e.type))||(e.name!=null&&c.test(e.name))}var n=b.excludes.length;while(n--){var f=new RegExp(b.excludes[n],"i");d=d&&(e.type==null||f.test(e.type))&&(e.name==null||f.test(e.name))}return d};g.ratioToFloat=function(a){var b=a.toString(),c=b.search(/[x:]/i);if(c>-1){b=parseFloat(b.substring(0,c))/parseFloat(b.substring(c+1))}else{b=parseFloat(b)}return b};g.registerModelChangeValidator=function(a,c,b){if(a){a.$formatters.push(function(d){if(a.$dirty){var e=d;if(d&&!angular.isArray(d)){e=[d]}g.validate(e,0,a,c,b).then(function(){g.applyModelValidation(a,e)})}return d})}};function k(a,b){if(b!=null&&!a.$dirty){if(a.$setDirty){a.$setDirty()}else{a.$dirty=true}}}g.applyModelValidation=function(a,b){k(a,b);angular.forEach(a.$ngfValidations,function(c){a.$setValidity(c.name,c.valid)})};g.getValidationAttr=function(o,c,f,p,d){var b="ngf"+f[0].toUpperCase()+f.substr(1);var a=g.attrGetter(b,o,c,{$file:d});if(a==null){a=g.attrGetter("ngfValidate",o,c,{$file:d});if(a){var e=(p||f).split(".");a=a[e[0]];if(e.length>1){a=a&&a[e[1]]}}}return a};g.validate=function(z,u,v,f,A){v=v||{};v.$ngfValidations=v.$ngfValidations||[];angular.forEach(v.$ngfValidations,function(m){m.valid=true});var B=function(n,m){return g.attrGetter(n,f,A,m)};var e=(g.attrGetter("ngfIgnoreInvalid",f,A)||"").split(" ");var y=g.attrGetter("ngfRunAllValidations",f,A);if(z==null||z.length===0){return g.emptyPromise({validFiles:z,invalidFiles:[]})}z=z.length===undefined?[z]:z.slice(0);var b=[];function w(q,n,m){if(z){var o=z.length,s=null;while(o--){var p=z[o];if(p){var r=g.getValidationAttr(f,A,q,n,p);if(r!=null){if(!m(p,r,o)){if(e.indexOf(q)===-1){p.$error=q;(p.$errorMessages=(p.$errorMessages||{}))[q]=true;p.$errorParam=r;if(b.indexOf(p)===-1){b.push(p)}if(!y){z.splice(o,1)}s=false}else{z.splice(o,1)}}}}}if(s!==null){v.$ngfValidations.push({name:q,valid:s})}}}w("pattern",null,g.validatePattern);w("minSize","size.min",function(n,m){return n.size+0.1>=g.translateScalars(m)});w("maxSize","size.max",function(n,m){return n.size-0.1<=g.translateScalars(m)});var a=0;w("maxTotalSize",null,function(n,m){a+=n.size;if(a>g.translateScalars(m)){z.splice(0,z.length);return false}return true});w("validateFn",null,function(n,m){return m===true||m===null||m===""});if(!z.length){return g.emptyPromise({validFiles:[],invalidFiles:b})}function c(o,t,r,p,s){function n(G,J,H){function I(C){if(C()){if(e.indexOf(o)===-1){J.$error=o;(J.$errorMessages=(J.$errorMessages||{}))[o]=true;J.$errorParam=H;if(b.indexOf(J)===-1){b.push(J)}if(!y){var D=z.indexOf(J);if(D>-1){z.splice(D,1)}}G.resolve(false)}else{var E=z.indexOf(J);if(E>-1){z.splice(E,1)}G.resolve(true)}}else{G.resolve(true)}}if(H!=null){p(J,H).then(function(C){I(function(){return !s(C,H)})},function(){I(function(){return B("ngfValidateForce",{$file:J})})})}else{G.resolve(true)}}var m=[g.emptyPromise(true)];if(z){z=z.length===undefined?[z]:z;angular.forEach(z,function(F){var E=h.defer();m.push(E.promise);if(r&&(F.type==null||F.type.search(r)!==0)){E.resolve(true);return}if(o==="dimensions"&&g.attrGetter("ngfDimensions",f)!=null){g.imageDimensions(F).then(function(C){n(E,F,B("ngfDimensions",{$file:F,$width:C.width,$height:C.height}))},function(){E.resolve(false)})}else{if(o==="duration"&&g.attrGetter("ngfDuration",f)!=null){g.mediaDuration(F).then(function(C){n(E,F,B("ngfDuration",{$file:F,$duration:C}))},function(){E.resolve(false)})}else{n(E,F,g.getValidationAttr(f,A,o,t,F))}}})}var q=h.defer();h.all(m).then(function(H){var F=true;for(var G=0;G<H.length;G++){if(!H[G]){F=false;break}}v.$ngfValidations.push({name:o,valid:F});q.resolve(F)});return q.promise}var x=h.defer();var d=[];d.push(c("maxHeight","height.max",/image/,this.imageDimensions,function(m,n){return m.height<=n}));d.push(c("minHeight","height.min",/image/,this.imageDimensions,function(m,n){return m.height>=n}));d.push(c("maxWidth","width.max",/image/,this.imageDimensions,function(m,n){return m.width<=n}));d.push(c("minWidth","width.min",/image/,this.imageDimensions,function(m,n){return m.width>=n}));d.push(c("dimensions",null,/image/,function(n,m){return g.emptyPromise(m)},function(m){return m}));d.push(c("ratio",null,/image/,this.imageDimensions,function(q,m){var o=m.toString().split(","),n=false;for(var p=0;p<o.length;p++){if(Math.abs((q.width/q.height)-g.ratioToFloat(o[p]))<0.01){n=true}}return n}));d.push(c("maxRatio","ratio.max",/image/,this.imageDimensions,function(m,n){return(m.width/m.height)-g.ratioToFloat(n)<0.0001}));d.push(c("minRatio","ratio.min",/image/,this.imageDimensions,function(m,n){return(m.width/m.height)-g.ratioToFloat(n)>-0.0001}));d.push(c("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(m,n){return m<=g.translateScalars(n)}));d.push(c("minDuration","duration.min",/audio|video/,this.mediaDuration,function(m,n){return m>=g.translateScalars(n)}));d.push(c("duration",null,/audio|video/,function(n,m){return g.emptyPromise(m)},function(m){return m}));d.push(c("validateAsyncFn",null,null,function(n,m){return m},function(m){return m===true||m===null||m===""}));h.all(d).then(function(){if(y){for(var m=0;m<z.length;m++){var n=z[m];if(n.$error){z.splice(m--,1)}}}y=false;w("maxFiles",null,function(o,q,p){return u+p<q});x.resolve({validFiles:z,invalidFiles:b})});return x.promise};g.imageDimensions=function(b){if(b.$ngfWidth&&b.$ngfHeight){var a=h.defer();l(function(){a.resolve({width:b.$ngfWidth,height:b.$ngfHeight})});return a.promise}if(b.$ngfDimensionPromise){return b.$ngfDimensionPromise}var c=h.defer();l(function(){if(b.type.indexOf("image")!==0){c.reject("not image");return}g.dataUrl(b).then(function(d){var p=angular.element("<img>").attr("src",d).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function r(){var m=p[0].naturalWidth||p[0].clientWidth;var n=p[0].naturalHeight||p[0].clientHeight;p.remove();b.$ngfWidth=m;b.$ngfHeight=n;c.resolve({width:m,height:n})}function f(){p.remove();c.reject("load error")}p.on("load",r);p.on("error",f);var e=0;function q(){l(function(){if(p[0].parentNode){if(p[0].clientWidth){r()}else{if(e++>10){f()}else{q()}}}},1000)}q();angular.element(document.getElementsByTagName("body")[0]).append(p)},function(){c.reject("load error")})});b.$ngfDimensionPromise=c.promise;b.$ngfDimensionPromise["finally"](function(){delete b.$ngfDimensionPromise});return b.$ngfDimensionPromise};g.mediaDuration=function(b){if(b.$ngfDuration){var a=h.defer();l(function(){a.resolve(b.$ngfDuration)});return a.promise}if(b.$ngfDurationPromise){return b.$ngfDurationPromise}var c=h.defer();l(function(){if(b.type.indexOf("audio")!==0&&b.type.indexOf("video")!==0){c.reject("not media");return}g.dataUrl(b).then(function(r){var e=angular.element(b.type.indexOf("audio")===0?"<audio>":"<video>").attr("src",r).css("visibility","none").css("position","fixed");function q(){var m=e[0].duration;b.$ngfDuration=m;e.remove();c.resolve(m)}function p(){e.remove();c.reject("load error")}e.on("loadedmetadata",q);e.on("error",p);var d=0;function f(){l(function(){if(e[0].parentNode){if(e[0].duration){q()}else{if(d>10){p()}else{f()}}}},1000)}f();angular.element(document.body).append(e)},function(){c.reject("load error")})});b.$ngfDurationPromise=c.promise;b.$ngfDurationPromise["finally"](function(){delete b.$ngfDurationPromise});return b.$ngfDurationPromise};return g}]);ngFileUpload.service("UploadResize",["UploadValidate","$q",function(i,g){var j=i;var h=function(c,l,a,b,d){var e=d?Math.max(a/c,b/l):Math.min(a/c,b/l);return{width:c*e,height:l*e,marginX:c*e-a,marginY:l*e-b}};var f=function(c,v,b,d,q,t,u,r){var a=g.defer();var e=document.createElement("canvas");var s=document.createElement("img");s.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000");document.body.appendChild(s);s.onload=function(){var o=s.width,x=s.height;s.parentNode.removeChild(s);if(r!=null&&r(o,x)===false){a.reject("resizeIf");return}try{if(t){var k=j.ratioToFloat(t);var p=o/x;if(p<k){v=o;b=v/k}else{b=x;v=b*k}}if(!v){v=o}if(!b){b=x}var m=h(o,x,v,b,u);e.width=Math.min(m.width,v);e.height=Math.min(m.height,b);var n=e.getContext("2d");n.drawImage(s,Math.min(0,-m.marginX/2),Math.min(0,-m.marginY/2),m.width,m.height);a.resolve(e.toDataURL(q||"image/WebP",d||0.934))}catch(l){a.reject(l)}};s.onerror=function(){s.parentNode.removeChild(s);a.reject()};s.src=c;return a.promise};j.dataUrltoBlob=function(b,p,d){var c=b.split(","),q=c[0].match(/:(.*?);/)[1],n=atob(c[1]),e=n.length,a=new Uint8Array(e);while(e--){a[e]=n.charCodeAt(e)}var r=new window.Blob([a],{type:q});r.name=p;r.$ngfOrigSize=d;return r};j.isResizeSupported=function(){var a=document.createElement("canvas");return window.atob&&a.getContext&&a.getContext("2d")&&window.Blob};if(j.isResizeSupported()){Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(a){this.$ngfName=a},configurable:true})}j.resize=function(a,b){if(a.type.indexOf("image")!==0){return j.emptyPromise(a)}var c=g.defer();j.dataUrl(a,true).then(function(d){f(d,b.width,b.height,b.quality,b.type||a.type,b.ratio,b.centerCrop,b.resizeIf).then(function(e){if(a.type==="image/jpeg"&&b.restoreExif!==false){try{e=j.restoreExif(d,e)}catch(m){setTimeout(function(){throw m},1)}}try{var n=j.dataUrltoBlob(e,a.name,a.size);c.resolve(n)}catch(m){c.reject(m)}},function(e){if(e==="resizeIf"){c.resolve(a)}c.reject(e)})},function(d){c.reject(d)});return c.promise};return j}]);(function(){ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(i,j,b,k,a,l){return{restrict:"AEC",require:"?ngModel",link:function(g,f,h,e){c(g,f,h,e,i,j,b,k,a,l)}}}]);ngFileUpload.directive("ngfNoFileDrop",function(){return function(b,a){if(d()){a.css("display","none")}}});ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,b,f){return function(j,e,l){if(d()){var k=a(f.attrGetter("ngfDropAvailable",l));b(function(){k(j);if(k.assign){k.assign(j,true)}})}}}]);function c(Q,B,G,L,P,b,J,A,a,C){var H=d();var N=function(g,f,e){return A.attrGetter(g,G,f,e)};if(N("dropAvailable")){b(function(){if(Q[N("dropAvailable")]){Q[N("dropAvailable")].value=H}else{Q[N("dropAvailable")]=H}})}if(!H){if(N("ngfHideOnDropNotAvailable",Q)===true){B.css("display","none")}return}function K(){return B.attr("disabled")||N("ngfDropDisabled",Q)}if(N("ngfSelect")==null){A.registerModelChangeValidator(L,G,Q)}var y=null;var M=P(N("ngfStopPropagation"));var O=1;var E;B[0].addEventListener("dragover",function(e){if(K()||!A.shouldUpdateOn("drop",G,Q)){return}e.preventDefault();if(M(Q)){e.stopPropagation()}if(navigator.userAgent.indexOf("Chrome")>-1){var f=e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect=("move"===f||"linkMove"===f)?"move":"copy"}b.cancel(y);if(!E){E="C";I(Q,G,e,function(g){E=g;B.addClass(E);N("ngfDrag",Q,{$isDragging:true,$class:E,$event:e})})}},false);B[0].addEventListener("dragenter",function(e){if(K()||!A.shouldUpdateOn("drop",G,Q)){return}e.preventDefault();if(M(Q)){e.stopPropagation()}},false);B[0].addEventListener("dragleave",function(e){if(K()||!A.shouldUpdateOn("drop",G,Q)){return}e.preventDefault();if(M(Q)){e.stopPropagation()}y=b(function(){if(E){B.removeClass(E)}E=null;N("ngfDrag",Q,{$isDragging:false,$event:e})},O||100)},false);B[0].addEventListener("drop",function(e){if(K()||!A.shouldUpdateOn("drop",G,Q)){return}e.preventDefault();if(M(Q)){e.stopPropagation()}if(E){B.removeClass(E)}E=null;D(e.dataTransfer,e,"dropUrl")},false);B[0].addEventListener("paste",function(e){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&N("ngfEnableFirefoxPaste",Q)){e.preventDefault()}if(K()||!A.shouldUpdateOn("paste",G,Q)){return}D(e.clipboardData||e.originalEvent.clipboardData,e,"pasteUrl")},false);if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&N("ngfEnableFirefoxPaste",Q)){B.attr("contenteditable",true);B.on("keypress",function(e){if(!e.metaKey&&!e.ctrlKey){e.preventDefault()}})}function D(i,h,g){if(!i){return}var e;try{e=i&&i.getData&&i.getData("text/html")}catch(f){}z(i.items,i.files,N("ngfAllowDir",Q)!==false,N("multiple")||N("ngfMultiple",Q)).then(function(j){if(j.length){R(j,h)}else{F(g,e).then(function(k){R(k,h)})}})}function R(e,f){A.updateModel(L,G,Q,N("ngfChange")||N("ngfDrop"),e,f)}function F(j,h){if(!A.shouldUpdateOn(j,G,Q)||typeof h!=="string"){return A.rejectPromise([])}var g=[];h.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(m,k,l){g.push(l)});var i=[],e=[];if(g.length){angular.forEach(g,function(k){i.push(A.urlToBlob(k).then(function(l){e.push(l)}))});var f=C.defer();C.all(i).then(function(){f.resolve(e)},function(k){f.reject(k)});return f.promise}return A.emptyPromise()}function I(k,h,m,l){var j=N("ngfDragOverClass",k,{$event:m}),e="dragover";if(angular.isString(j)){e=j}else{if(j){if(j.delay){O=j.delay}if(j.accept||j.reject){var f=m.dataTransfer.items;if(f==null||!f.length){e=j.accept}else{var g=j.pattern||N("ngfPattern",k,{$event:m});var i=f.length;while(i--){if(!A.validatePattern(f[i],g)){e=j.reject;break}else{e=j.accept}}}}}}l(e)}function z(s,j,m,i){var k=A.getValidationAttr(G,Q,"maxFiles");if(k==null){k=Number.MAX_VALUE}var t=A.getValidationAttr(G,Q,"maxTotalSize");if(t==null){t=Number.MAX_VALUE}var r=N("ngfIncludeDir",Q);var l=[],o=0;function e(x,w){var v=C.defer();if(x!=null){if(x.isDirectory){var X=[A.emptyPromise()];if(r){var Y={type:"directory"};Y.name=Y.path=(w||"")+x.name;l.push(Y)}var Z=x.createReader();var ab=[];var aa=function(){Z.readEntries(function(T){try{if(!T.length){angular.forEach(ab.slice(0),function(U){if(l.length<=k&&o<=t){X.push(e(U,(w?w:"")+x.name+"/"))}});C.all(X).then(function(){v.resolve()},function(U){v.reject(U)})}else{ab=ab.concat(Array.prototype.slice.call(T||[],0));aa()}}catch(S){v.reject(S)}},function(S){v.reject(S)})};aa()}else{x.file(function(T){try{T.path=(w?w:"")+T.name;if(r){T=A.rename(T,T.path)}l.push(T);o+=T.size;v.resolve()}catch(S){v.reject(S)}},function(S){v.reject(S)})}}return v.promise}var q=[A.emptyPromise()];if(s&&s.length>0&&J.location.protocol!=="file:"){for(var f=0;f<s.length;f++){if(s[f].webkitGetAsEntry&&s[f].webkitGetAsEntry()&&s[f].webkitGetAsEntry().isDirectory){var p=s[f].webkitGetAsEntry();if(p.isDirectory&&!m){continue}if(p!=null){q.push(e(p))}}else{var u=s[f].getAsFile();if(u!=null){l.push(u);o+=u.size}}if(l.length>k||o>t||(!i&&l.length>0)){break}}}else{if(j!=null){for(var g=0;g<j.length;g++){var h=j.item(g);if(h.type||h.size>0){l.push(h);o+=h.size}if(l.length>k||o>t||(!i&&l.length>0)){break}}}}var n=C.defer();C.all(q).then(function(){if(!i&&!r&&l.length){var v=0;while(l[v]&&l[v].type==="directory"){v++}n.resolve([l[v]])}else{n.resolve(l)}},function(v){n.reject(v)});return n.promise}}function d(){var a=document.createElement("div");return("draggable" in a)&&("ondrop" in a)&&!/Edge\/12./i.test(navigator.userAgent)}})();ngFileUpload.service("UploadExif",["UploadResize","$q",function(h,j){var i=h;i.isExifSupported=function(){return window.FileReader&&new FileReader().readAsArrayBuffer&&i.isResizeSupported()};function f(c,b,a,d){switch(b){case 2:return c.transform(-1,0,0,1,a,0);case 3:return c.transform(-1,0,0,-1,a,d);case 4:return c.transform(1,0,0,-1,0,d);case 5:return c.transform(0,1,1,0,0,0);case 6:return c.transform(0,1,-1,0,d,0);case 7:return c.transform(0,-1,-1,0,d,a);case 8:return c.transform(0,-1,1,0,0,a)}}i.readOrientation=function(b){var a=j.defer();var d=new FileReader();var c=b.slice?b.slice(0,64*1024):b;d.readAsArrayBuffer(c);d.onerror=function(e){return a.reject(e)};d.onload=function(v){var B={orientation:1};var u=new DataView(this.result);if(u.getUint16(0,false)!==65496){return a.resolve(B)}var z=u.byteLength,y=2;while(y<z){var w=u.getUint16(y,false);y+=2;if(w===65505){if(u.getUint32(y+=2,false)!==1165519206){return a.resolve(B)}var e=u.getUint16(y+=6,false)===18761;y+=u.getUint32(y+4,e);var t=u.getUint16(y,e);y+=2;for(var x=0;x<t;x++){if(u.getUint16(y+(x*12),e)===274){var A=u.getUint16(y+(x*12)+8,e);if(A>=2&&A<=8){u.setUint16(y+(x*12)+8,1,e);B.fixedArrayBuffer=v.target.result}B.orientation=A;return a.resolve(B)}}}else{if((w&65280)!==65280){break}else{y+=u.getUint16(y,false)}}}return a.resolve(B)};return a.promise};function g(c){var a="";var d=new Uint8Array(c);var e=d.byteLength;for(var b=0;b<e;b++){a+=String.fromCharCode(d[b])}return window.btoa(a)}i.applyExifRotation=function(a){if(a.type.indexOf("image/jpeg")!==0){return i.emptyPromise(a)}var b=j.defer();i.readOrientation(a).then(function(c){if(c.orientation<2||c.orientation>8){return b.resolve(a)}i.dataUrl(a,true).then(function(d){var e=document.createElement("canvas");var l=document.createElement("img");l.onload=function(){try{e.width=c.orientation>4?l.height:l.width;e.height=c.orientation>4?l.width:l.height;var p=e.getContext("2d");f(p,c.orientation,l.width,l.height);p.drawImage(l,0,0);var q=e.toDataURL(a.type||"image/WebP",0.934);q=i.restoreExif(g(c.fixedArrayBuffer),q);var k=i.dataUrltoBlob(q,a.name);b.resolve(k)}catch(r){return b.reject(r)}};l.onerror=function(){b.reject()};l.src=d},function(d){b.reject(d)})},function(c){b.reject(c)});return b.promise};i.restoreExif=function(a,b){var c={};c.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode64=function(x){var z="",A,e,u="",d,t,v,w="",y=0;do{A=x[y++];e=x[y++];u=x[y++];d=A>>2;t=((A&3)<<4)|(e>>4);v=((e&15)<<2)|(u>>6);w=u&63;if(isNaN(e)){v=w=64}else{if(isNaN(u)){w=64}}z=z+this.KEY_STR.charAt(d)+this.KEY_STR.charAt(t)+this.KEY_STR.charAt(v)+this.KEY_STR.charAt(w);A=e=u="";d=t=v=w=""}while(y<x.length);return z};c.restore=function(p,d){if(p.match("data:image/jpeg;base64,")){p=p.replace("data:image/jpeg;base64,","")}var e=this.decode64(p);var o=this.slice2Segments(e);var n=this.exifManipulation(d,o);return"data:image/jpeg;base64,"+this.encode64(n)};c.exifManipulation=function(d,e){var n=this.getExifArray(e),m=this.insertExif(d,n);return new Uint8Array(m)};c.getExifArray=function(d){var e;for(var l=0;l<d.length;l++){e=d[l];if(e[0]===255&e[1]===225){return e}}return[]};c.insertExif=function(t,s){var u=t.replace("data:image/jpeg;base64,",""),q=this.decode64(u),r=q.indexOf(255,3),d=q.slice(0,r),e=q.slice(r),v=d;v=v.concat(s);v=v.concat(e);return v};c.slice2Segments=function(p){var d=0,o=[];while(1){if(p[d]===255&p[d+1]===218){break}if(p[d]===255&p[d+1]===216){d+=2}else{var r=p[d+2]*256+p[d+3],e=d+r+2,q=p.slice(d,e);o.push(q);d=e}if(d>p.length){break}}return o};c.decode64=function(x){var B,d,u="",C,e,v,w="",y=0,z=[];var A=/[^A-Za-z0-9\+\/\=]/g;if(A.exec(x)){console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, , "/',and "="\nExpect errors in decoding.')}x=x.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{C=this.KEY_STR.indexOf(x.charAt(y++));e=this.KEY_STR.indexOf(x.charAt(y++));v=this.KEY_STR.indexOf(x.charAt(y++));w=this.KEY_STR.indexOf(x.charAt(y++));B=(C<<2)|(e>>4);d=((e&15)<<4)|(v>>2);u=((v&3)<<6)|w;z.push(B);if(v!==64){z.push(d)}if(w!==64){z.push(u)}B=d=u="";C=e=v=w=""}while(y<x.length);return z};return c.restore(a,b)};return i}]);