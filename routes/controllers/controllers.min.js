"use strict";const urlRoot="/";const baseUrl=urlRoot+"api/";const baseTitle="Gistout - Discuss";const baseKeywords="Forum, discussion, chat, live, Nairaland, gist, article, discuss, gossip, story, blog, news, entertainment, politics, fashion";const baseDescription="gistout.com an international discussion forum made to entertain and make discussion fun";const openWeatherApiId="ff2c7dbb6d154c539de8bb55e9bdbe14";const fb_app_id="322819981522430";const loaderImg2='<img src="'+urlRoot+'docs/img/loaders/default2.gif" style="width: 20px; height: 20px;margin: 8px;">';var blop="/docs/audio/Blop.mp3";var audio=new Audio(blop);app.controller("rprtCntrllr",["$filter","$scope","$rootScope","report",function(e,c,a,b){a.pageTitle="Report - DashBoard | "+baseTitle;a.pageKeywords=e("keywordise")(baseTitle)+", "+baseKeywords;a.pageDescription=baseDescription+" - "+a.pageTitle;a.pageLocation=location.href;c.isLoaded=false;var d=b.getReports();d.then(function(f){if(f.data.report.length>0){log(f.data);c.isLoaded=true;c.noData=false;c.reports=f.data.report}else{c.isLoaded=false;c.noData=true}},function(f){log(f);Materialize.toast("Error in Connection",5000)})}]);app.controller("brthdyCntrllr",["$scope","misc",function(a,d){var c=1;var b=d.getTodaysBirthdays(c);b.then(function(e){if(e.data.users.length>0){a.noBirthday=false;a.birthday=e.data.users}else{a.noBirthday=true}},function(f){log(f)})}]);app.controller("sgnoutCntrllr",["$location","auth",function(c,b){var a=b.signout();a.then(function(d){if(d.data){var e=c.search();location.href=e.redirect}},function(d){log(d)})}]);app.controller("mnCntrllr",["$anchorScroll","$filter","$scope","$http","$sce","$route","users","gist","misc","notify","$rootScope","$location",function(j,w,x,E,r,s,t,e,l,p,m,k){var q,z,B,A,D,C,c,v,n;m.pageTitle=baseTitle;m.pageKeywords=w("keywordise")(baseTitle)+", "+baseKeywords;m.pageDescription=baseDescription+" - "+m.pageTitle;m.pageLocation=location.href;m.cacheBustParam="?v=2.0.1";m.gistoutDomain="https://gistout.com/";m.imgOptim=function(d,a){a=typeof a!=="undefined"?a+"x"+a:"200x200";switch(d){case"fit":return"https://img.gs/znvfwgxszs/fit/";break;case"crop":return"https://img.gs/znvfwgxszs/"+a+",crop=auto/";break}};x.busy=true;x.noMoreGists=true;var f=1;var y=null;if(k.hash()){j()}x.scrollTo=function(a){k.hash(a);j()};$(window).on("load",function(){init();wdtEmojiBundle.defaults.emojiType="twitter";wdtEmojiBundle.defaults.pickerColors=["green1","pink1","yellow1","blue1","gray1"];wdtEmojiBundle.init("#postArea")});x.goSearch=function(a){k.path("search/").search({q:encodeURIComponent(a)})};x.dateTime=l.dateConvert(new Date(),"DDD, DD MMM YYYY");var b=false;m.$on("$routeChangeSuccess",function(){window.scrollTo(0,0);D=p.getNewNotification();D.then(function(a){if(a.data>0){x.hasNoti=true;x.notificationCount=a.data;y=true;if(b){return}else{audio.play();b=true}m.pageTitle="("+x.notificationCount+") "+baseTitle}else{x.hasNoti=false;y=false}},function(a){Materialize.toast("Error in Connection!",5000);log(a)})});x.btnText=r.trustAsHtml("post");x.addPost=function(){var h=$("#add_post");var F=$(".Editor-editor").html();F=wdtEmojiBundle.render(F);var J=parseInt($("#posts-count").html());var M=parseInt($("#g-count-post").html());var L=$(".Editor-container");var i=$("#qoute-holder");var O=$("#imgContent").prop("files")[0];var P=new FormData();P.append("file",O);if(F===""){var g="animated shake";var u="webkitAnimationEnd mozAnimationEnd MSAnimationEnd animationEnd";L.addClass(g).one(u,function(){L.removeClass(g)});h.html("Post");h.removeAttr("disabled")}else{var I=L.data("role");if(I==="post"){x.btnText=r.trustAsHtml(loaderImg2);h.attr("disabled");var H=L.data("sess");var a=L.data("gist-id");var N=L.data("gist-user-id");P.append("quoteContent",F);P.append("gist_user_id",N);P.append("gist_id",a);P.append("sess",H);$.ajax({url:"/create-post.php",type:"POST",data:P,cache:false,contentType:false,processData:false,success:function(R){if(R==0){Materialize.toast("Error Posting");x.btnText=r.trustAsHtml("post");h.removeAttr("disabled")}else{if(R==2){Materialize.toast("Error Posting.. Already Exist");x.btnText=r.trustAsHtml("post");h.removeAttr("disabled")}else{var S=JSON.parse(R);S=S.posts[0];S.content=r.trustAsHtml(S.content);S.quoteContent=r.trustAsHtml(S.quoteContent);x.$broadcast("newPostData",S);$("#posts-count").html(J+1);$("#g-count-post").html(M+1);x.btnText=r.trustAsHtml("post");h.removeAttr("disabled");$(".Editor-editor").html("");$("#box-pop").css({transform:"translateY(1000px)"});$(".fixed-action-btn").removeClass("bounceOutDown");window.scrollTo(0,document.body.scrollHeight);resetFileElement($("#imgContent"))}}}})}else{if(I==="quote"){x.btnText=r.trustAsHtml(loaderImg2);h.attr("disabled");var G=L.data("purpose");var K=L.data("purposeful");var H=L.data("sess");var a=L.data("gist-id");P.append("quoteContent",F);P.append("gist_id",a);P.append("postID",G);P.append("postUserId",K);P.append("sess",H);$.ajax({url:"/create-quote.php",type:"POST",data:P,cache:false,contentType:false,processData:false,success:function(R){if(R==0||R==2){Materialize.toast("Error Posting");x.btnText=r.trustAsHtml("post");h.removeAttr("disabled")}else{var S=JSON.parse(R);S=S.posts[0];S.content=r.trustAsHtml(S.content);S.quoteContent=r.trustAsHtml(S.quoteContent);x.$broadcast("newPostData",S);$("#posts-count").html(J+1);$("#g-count-post").html(M+1);$(".Editor-editor").html("");x.btnText=r.trustAsHtml("post");h.removeAttr("disabled");$("#box-pop").css({transform:"translateY(1000px)"});$(".fixed-action-btn").removeClass("bounceOutDown");window.scrollTo(0,document.body.scrollHeight);resetFileElement($("#imgContent"))}}})}else{if(I==="gist"){x.btnText=r.trustAsHtml(loaderImg2);h.attr("disabled");var Q=$("#gistTitle").val();var H=L.data("sess");var d=L.data("cat-id");P.append("quoteContent",F);P.append("title",Q);P.append("cat_id",d);P.append("sess",H);if(Q==""||Q<1){var g="animated shake";var u="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationEnd animationEnd";$("#gist-title-input").addClass(g).one(u,function(){$("#gist-title-input").removeClass(g)})}else{$.ajax({url:"/create-gist.php",type:"POST",data:P,cache:false,contentType:false,processData:false,success:function(R){if(R==0){Materialize.toast("Error Adding Gist",4000);x.btnText=r.trustAsHtml("post");h.removeAttr("disabled")}else{if(R==2){Materialize.toast("Error Gisting.. Already Exist",4000);x.btnText=r.trustAsHtml("post");h.removeAttr("disabled")}else{$(".Editor-editor").html("");$("#gistTitle").val("");x.btnText=r.trustAsHtml("post");h.removeAttr("disabled");s.reload();$("#box-pop").css({transform:"translateY(1000px)"});$(".fixed-action-btn").removeClass("bounceOutDown");resetFileElement($("#imgContent"))}}}})}}}}}};q=t.getUserBySess();q.then(function(a){if(a.data){for(z=0;z<a.data.users.length;z++){m.unique_id=a.data.users[z].unique_id;m.fullname=a.data.users[z].fullname;m.profile_img=a.data.users[z].user_avatar;m.username=a.data.users[z].username;m.id=a.data.users[z].id;(a.data.users[z].status==="super_user")?m.superUser=true:m.superUser=false}m.isLoggedIn=true;m.$broadcast("is:logged:in",true)}else{m.isLoggedIn=false}},function(a){log(a)});o.url=baseUrl+"right-side.php";E(o).then(function(a){C=a.data;if(C.ad.length!==0){if(C.ad.gist_ads.length>0){x.noAd=false;x.ad=C.ad.gist_ads[0]}else{x.noAd=true}}else{x.noAd=true}x.cat=C.c.category;if(C.th.length!==0){if(C.th.trending_hashtag.length>0){x.noTh=false;x.th=C.th.trending_hashtag}else{x.noTh=true}}else{x.noTh=true}if(C.tu.length!==0){if(C.tu.users.length>0){x.noTu=false;x.tu=C.tu.users}else{x.noTu=true}}else{x.noTu=true}if(C.dob.length!==0){if(C.dob.users.length>0){x.noDob=false;x.dob=C.dob.users}else{x.noDob=true}}else{x.noDob=true}},function(a){log(a)});m.$watch("pageLocation",function(g,a){var u=/\/gist\//gi;var i=g.toString().lastIndexOf("/sign");(i>-1)?x.isLogInPage=true:x.isLogInPage=false;var F=g.toString().lastIndexOf("/birthday");(F>-1)?x.isBDayPage=true:x.isBDayPage=false;var h=g.toString().match(u);if(h!==null){ang.forEach(h,function(G){if(G==="/gist/"){x.noRg=false}else{x.noRg=true}})}else{x.noRg=true}x.redirectAfterAuth=encodifyURI(g);var d=g.toString().lastIndexOf("/notification");if(y){if(d>-1){x.hasNoti=false;m.pageTitle=baseTitle;c=p.seen();c.then(function(G){var H=G.data?G.data:!G.data},function(G){log(G)});b=false}}});x.$on("ngRepeatFinished",function(a){init()});x.editGist=function(h,d){$("#editGist").modal("open");var a=$("#gistArticle-"+h).html();var g=$("#editText");g.html(a);if(d==="post"){g.attr("data-post-id",h)}else{if(d==="gist"){g.attr("data-gist-id",h)}}g.attr("data-article",d)};x.updateGist=function(){var g=$("#editText");var a=g.html();var h=g.attr("data-article");if(h==="post"){v=g.attr("data-post-id");n=$("#gistArticle-"+v)}else{if(h==="gist"){v=g.attr("data-gist-id");n=$("#gistArticle-"+v)}}n.html(a);n.css({opacity:".4"});x.emptyEditor();$("#editGist").modal("close");var d=e.updateGist(v,a,h);d.then(function(i){(i.data==1)?n.css({opacity:"1"}):Materialize.toast("Error please try again",5000)},function(i){log(i)})};x.emptyEditor=function(){var a=$("#editText");a.html("")}}]);app.controller("hotGistsController",["$filter","$scope","$http","$route","gist","$rootScope",function(k,r,l,n,s,p){var q,b,e,c,m,j;p.pageTitle=baseTitle;p.pageKeywords=k("keywordise")(baseTitle)+", "+baseKeywords;p.pageDescription=p.pageTitle;p.pageLocation=location.href;r.busy=true;r.noMoreGists=true;var f=1;e=s.getGist(f);e.then(function(a){if(a.data.gists.length>0){r.noHotGist=false;r.gists=a.data.gists;f+=1;(a.data.gists.length<20)?r.noMoreGists=true:r.noMoreGists=false;r.busy=false}else{r.noHotGist=true;r.noMoreGists=false}},function(a){log(a);Materialize.toast("Error in connection!",5000)});r.loadMoreHotGists=function(){if(r.busy){return}r.busy=true;r.noMoreGists=true;c=s.getGist(f);c.then(function(a){log(a.data);if(a.data.gists.length>0){for(b=0;b<a.data.gists.length;b++){r.gists.push(a.data.gists[b])}r.busy=false;r.noMoreGists=false}else{r.busy=false;r.noMoreGists=true}},function(a){log(a);Materialize.toast("Error in connection!",5000)})}}]);app.controller("prflCntrllr",["$filter","$scope","$routeParams","$route","$http","$sce","$rootScope","Upload","users",function(d,j,i,f,e,g,h,c,b){h.pageTitle=i.username+" - "+baseTitle;h.pageKeywords=d("keywordise")(baseTitle)+", "+baseKeywords;h.pageDescription=h.pageTitle+" - "+baseDescription;h.pageLocation=location.href;j.isLoaded=false;var a=$("#saveProfile");o.url=baseUrl+"getUser.php?username="+i.username;e(o).then(function(l){if(l!==""){var k;for(k=0;k<l.data.users.length;k++){l.data.users[k].bio=g.trustAsHtml(l.data.users[k].bio);j.u=l.data.users[k];j.isLoaded=true;var m=l.data.users[k].starProgress.stars_count;j.star=starCount(m)}}else{location.path=urlRoot+"404"}},function(k){log(k)});j.$on("$viewContentLoaded",function(){init()});j.updateProfileImg=function(){if(j.form.file.$valid&&j.file){j.upload(j.file)}};j.upload=function(k){c.upload({url:"/update.profile.php",data:{file:k},headers:{"Content-Type":"application/json"}}).then(function(l){if(l.data===5){location.reload()}else{if(l.data===3){Materialize.toast("File type not supported or is to large",5000)}else{if(l.data===2){Materialize.toast("Failed to upload",5000)}else{if(l.data===0){Materialize.toast("Invalid Request",5000)}}}}},function(l){log("Error status: "+l.status)},function(l){var m=parseInt(100*l.loaded/l.total);log("progress: "+m+"% "+l.config.data.file.name)})};j.submitProfileUpdate=function(){a.html(loaderImg2);var q=$("#inputBio").val();var p=$("#InputFullName").val();var s=$("#InputEmail").val();var n=$("#InputNickname").val();var r=$("#Dob").val();var m=$("#InputWebsite").val();var k=$("#InputPassword").val();var l={inputBio:q,InputFullName:p,InputEmail:s,InputNickname:n,Dob:r,InputWebsite:m,InputPassword:k};var t=b.updateProfile(l);t.then(function(u){a.html("save profile");(u.statusText=="OK")?f.reload():Materialize.toast("<b>GO BUTLER : </b>Oops!! the request you are trying to make is invalid.",5000)},function(u){log(u)})}}]);app.controller("ctgryLstCntrllr",["$filter","$scope","$http","$rootScope",function(c,b,d,a){a.pageTitle="Categories - "+baseTitle;a.pageKeywords=c("keywordise")(baseTitle)+", "+baseKeywords;a.pageDescription=a.pageTitle+" - "+baseDescription;a.pageLocation=location.href;b.busy=true;o.url=baseUrl+"category.php";d(o).then(function(f){if(f!==""){var e,g;for(e=0;e<f.data.category.length;e++){b.c=f.data.category}b.busy=true}else{Materialize.toast("No category found",5000,"rounded",function(){location.href="/404"});b.busy=false}},function(e){log(e)});b.$on("ngRepeatFinished",function(){init()})}]);app.controller("ctgryGstCntrllr",["$filter","$scope","$rootScope","$routeParams","misc","$http","users","gist",function(e,c,b,d,h,g,f,a){c.$on("ngRepeatFinished",function(){init()});c.busy=true;o.url=baseUrl+"category.php?title="+d.category;g(o).then(function(n){if(n.data.category[0]!==undefined){var k,m,j,q,l;var p=[];j=n.data.category;c.cl=j[0];b.pageKeywords=e("keywordise")(baseTitle)+", "+baseKeywords;b.pageTitle=c.cl.title+" - "+baseTitle;b.pageDescription=b.pageTitle+" - "+baseDescription;b.pageLocation=location.href;c.timago=h.timeSince;o.url=baseUrl+"category.php?process_cat_views=true&viewsCat="+c.cl.id;http(o,g).then(function(i){if(!i.data){log(i.data)}},function(i){log(i)});var r=1;q=a.getGistBycatId(c.cl.id,r);q.then(function(i){if(i.data.allGist.gists.length>0){c.noGist=false;c.ag=i.data.allGist.gists}else{c.noGist=true}if(i.data.hotGists.gists.length>0){c.noHotGist=false;c.hg=i.data.hotGists.gists}else{c.noHotGist=true}if(i.data.trendingGists.gists.length>0){c.noTrendingGist=false;c.tg=i.data.trendingGists.gists}else{c.noTrendingGist=true}if(i.data.lastUpdatedGists.gists.length>0){c.noLastUpGist=false;c.lug=i.data.lastUpdatedGists.gists}else{c.noLastUpGist=true}if((i.data.allGist.gists.length>0)||(i.data.hotGists.gists.length>0)||(i.data.trendingGists.gists.length>0)||(i.data.lastUpdatedGists.gists.length>0)){c.emptyCat=false}else{c.emptyCat=true}c.busy=false},function(i){Materialize.toast("Error in Connection!",5000);log(i)})}else{location.href=urlRoot+"404"}},function(i){Materialize.toast("Error in Connection!",5000);log(i)})}]);app.controller("gstCntrllr",["$scope","$rootScope","$routeParams","$sce","$http","$injector","gist","users","post","$filter",function(y,n,j,t,G,A,e,v,B,x){var E,r,w,C,z,D,F,c,s,b,f,q;var k,m;y.busy=false;y.noMorePosts=true;var H=x("undoPermalink")(j.gist);n.pageTitle=H+" - "+baseTitle;n.pageKeywords=x("keywordise")(baseTitle)+", "+baseKeywords;n.pageDescription=n.pageTitle+" - "+baseDescription;n.pageLocation=location.href;y.isLoaded=false;y.isLoadingMore=false;y.pData=[];var h=1;D=e.getGistById(j.id);D.then(function(a){if(a.data.gists[0]!==undefined){E=a.data.gists[0];(E.hasImage)?y.pageImage=E.image:y.pageImage=E.image;E.content=t.trustAsHtml(E.content);var d=location.href.split("#");E.location=encodeURIComponent(d[0]);y.gistData=E;y.$broadcast("contentLoaded");n.superUser||E.isAdmin?n.authGistEdit=true:n.authGistEdit=false;if(E.hasPosts){w=B.getPostByGistId(E.id,h);w.then(function(g){for(C=0;C<g.data.posts.length;C++){g.data.posts[C].content=t.trustAsHtml(g.data.posts[C].content);g.data.posts[C].quoteContent=t.trustAsHtml(g.data.posts[C].quoteContent);n.isAdmin=g.data.posts[C].isAdmin;n.superUser||n.isAdmin?n.authPostEdit=true:n.authPostEdit=false;y.pData.push(g.data.posts[C])}y.isLoaded=true;y.noData=false;g.data.posts.length<20?y.noMorePosts=true:y.noMorePosts=false;h+=1},function(g){Materialize.toast("Error in connection",5000)})}else{y.isLoaded=true;y.noData=true}z=e.getRelatedGists(E.category_id);z.then(function(g){var i=g.data.gists;if(i){for(F=0;F<i.length;F++){(i[F].id==j.id)?i.splice(F,1):y.relatedGists=i}var l=y.$parent.$parent.relatedGists=y.relatedGists;(l.length>0)?y.noRg=false:y.noRg=true}},function(g){Materialize.toast("Error in connection",5000)})}else{location.href=urlRoot+"404"}},function(a){Materialize.toast("Error in Connection!",5000);log(a)});c=e.gistView(j.id);c.then(function(a){},function(a){log(a)});y.$on("newPostData",function(a,d){y.$apply(function(){y.pData.push(d);y.noData=false})});y.loadMore=function(){if(y.busy){return}y.busy=true;y.noMorePosts=true;m=$("#lastPost").attr("data-gistLast");var a=B.getPostByGistId(m,h);a.then(function(d){if(d.data.posts.length>0){for(C=0;C<d.data.posts.length;C++){d.data.posts[C].content=t.trustAsHtml(d.data.posts[C].content);d.data.posts[C].quoteContent=t.trustAsHtml(d.data.posts[C].quoteContent);y.pData.push(d.data.posts[C])}y.busy=false;y.noMorePosts=false;h+=1}else{$("#loadmoreBtn").remove();y.busy=false;y.noMorePosts=true}},function(d){log(d)})};y.$on("ngRepeatFinished",function(){init()});y.addAsHotFlag=function(d){var a=$("#hotFlag");a.removeClass("grey-text");a.addClass("red-text");s=e.setHotGist(d);s.then(function(g){log(g.data);if(g.data){y.gistData.hot_flag=1;a.attr("ng-click","unSetHot(gistData.id)");a.attr("data-tooltip","unset as hot gist")}else{a.removeClass("red-text");a.addClass("grey-text")}},function(g){Materialize.toast("Error in Connection",5000)})};y.unSetHot=function(d){var a=$("#hotFlag");a.removeClass("red-text");a.addClass("grey-text");b=e.unsetHotGist(d);b.then(function(g){log(g.data);if(g.data){y.gistData.hot_flag=0;a.attr("ng-click","addAsHotFlag(gistData.id)");a.attr("data-tooltip","set as hot gist")}else{a.removeClass("red-text");a.addClass("grey-text")}},function(g){Materialize.toast("Error in Connection",5000)})};y.addAsTrending=function(d){var a=$("#trending");a.removeClass("grey-text");a.addClass("teal-text");f=e.setAsTrendGist(d);f.then(function(g){if(g.data){a.attr("ng-click","removeAsTrending(gistData.id)");a.attr("data-tooltip","unset as trending")}},function(g){Materialize.toast("Error in Connection",5000);log(g)})};y.removeAsTrending=function(d){var a=$("#trending");a.removeClass("teal-text");a.addClass("grey-text");q=e.unsetAsTrendGist(d);q.then(function(g){if(g.data){a.attr("ng-click","addAsTrending(gistData.id)");a.attr("data-tooltip","set as trending")}},function(g){Materialize.toast("Error in Connection",5000);log(g)})}}]);app.controller("ntCntrllr",["$filter","$scope","$rootScope","$http","$routeParams","users","notify","$sce","$location",function(t,v,e,B,a,k,g,h,c){var A,j,y,z,u,x,w,q,l;e.pageTitle=a.username+" - notification - "+baseTitle;e.pageKeywords=t("keywordise")(e.pageTitle)+", "+baseKeywords;e.pageDescription=e.pageTitle+" - "+baseDescription;e.pageLocation=location.href;v.busy=true;if(e.username===a.username){u=g.notify();u.then(function(b){if(b.data!==""){w=b.data.notification;for(x=0;x<w.length;x++){if(typeof w!=="undefined"){if(w[x].postRelated){w[x].postContent=h.trustAsHtml(w[x].postContent)}v.nots=w}else{c.url("/404")}}v.busy=false}else{v.noData=true}},function(b){log(b)})}else{c.url("/")}v.$on("ngRepeatFinished",function(b){init()})}]);app.controller("fwrCntrllr",["$filter","$scope","$rootScope","$http","$routeParams","users","follower","$location","$timeout",function(h,n,j,i,k,a,g,d,b){var l,e,c;j.pageTitle=k.username+" - followers - "+baseTitle;j.pageKeywords=h("keywordise")(j.pageTitle)+", "+baseKeywords;j.pageDescription=j.pageTitle+" - "+baseDescription;j.pageLocation=location.href;n.owner=k.username;n.busy=true;l=a.getUserByName(k.username);l.then(function(f){if(f.data.users[0]!==undefined){e=g.getFollowers(f.data.users[0].id);e.then(function(m){if(m.data===""){n.noData=true}else{n.noData=false;n.ms=m.data.following}n.busy=false},function(m){Materialize.toast("Error in Connection!",5000);log(m)})}else{Materialize.toast("This user Do not Exists!",2000);location.href="/404"}},function(f){log(f)})}]);app.controller("fwgCntrllr",["$filter","$scope","$rootScope","$routeParams","users","follower",function(e,j,g,h,a,c){var i,d,b;g.pageTitle=h.username+" - following - "+baseTitle;g.pageKeywords=e("keywordise")(g.pageTitle)+", "+baseKeywords;g.pageDescription=g.pageTitle+" - "+baseDescription;g.pageLocation=location.href;j.busy=true;i=a.getUserByName(h.username);i.then(function(f){if(f.data.users[0]!==undefined){d=c.getFollowing(f.data.users[0].id);d.then(function(k){if(k.data===""){j.noData=true}else{j.noData=false;j.fng=k.data.following}j.busy=false},function(k){Materialize.toast("Error in Connection!",5000);log(k)})}else{Materialize.toast("This user Do not Exists!",2000);location.href="/404";j.noData=true}},function(f){log(f)})}]);app.controller("stpCntrllr",["$filter","$scope","$rootScope","$routeParams","users","post","$sce",function(e,l,g,h,b,j,f){var k,a,c,d;g.pageTitle=h.username+" - starred posts - "+baseTitle;g.pageKeywords=e("keywordise")(g.pageTitle)+", "+baseKeywords;g.pageDescription=g.pageTitle+" - "+baseDescription;g.pageLocation=location.href;l.busy=true;k=b.getUserByName(h.username);k.then(function(i){a=j.starred(i.data.users[0].id);a.then(function(m){if(m.data===""){l.noData=true}else{l.noData=false;for(d=0;d<m.data.starred_post.length;d++){m.data.starred_post[d].postContent=f.trustAsHtml(m.data.starred_post[d].postContent)}l.stps=m.data.starred_post}l.busy=false},function(m){log(m)})},function(i){log(i)})}]);app.controller("tgCntrllr",["$filter","$scope","$rootScope","$http","$routeParams","$sce",function(f,c,a,h,e,b){var d,g;a.pageTitle=e.tag+" - "+baseTitle;a.pageKeywords=f("keywordise")(a.pageTitle)+", "+baseKeywords;a.pageDescription=a.pageTitle+" - "+baseDescription;a.pageLocation=location.href;c.busy=true;c.tag=e.tag;o.url=baseUrl+"tag.php?tag="+e.tag;h(o).then(function(i){g=i.data.trending_hashtag[0].tagPosts;if(g.length===0){c.noData=true}else{c.noData=false;for(d=0;d<g.length;d++){g[d].content=b.trustAsHtml(g[d].content)}c.tagPosts=g}c.busy=false},function(i){log(i)})}]);app.controller("srchCntrllr",["$http","$scope","$location","$sce","users","post","gist",function(h,m,e,j,c,k,n){var a,l,b,f,d;m.isLoadingData=true;m.noSearchPostData=null;a=e.search();m.searchString=a.q;l=c.getAllWithName(a.q);l.then(function(g){if(g.data.users.length>0){m.resUserLength=g.data.users.length;m.isLoadingData=false;m.noSearchUser=false;m.searchUserData=g.data.users}else{m.noSearchUser=true;m.isLoadingData=false}},function(g){log(g)});b=k.getAllPostsLike(a.q);b.then(function(g){if(g.data.posts.length>0){m.noSearchPostData=false;m.resPostLength=g.data.posts.length;for(d=0;d<g.data.posts.length;d++){g.data.posts[d].content=j.trustAsHtml(g.data.posts[d].content)}m.searchPostData=g.data.posts}else{m.noSearchPostData=true}},function(g){log(g)});f=n.getAllGistsLike(a.q);f.then(function(g){if(g.data.gists.length>0){m.noSearchGistData=false;m.resGistLength=g.data.gists.length;m.searchGistData=g.data.gists}else{m.noSearchGistData=true}},function(g){log(g)})}]);app.controller("authCntrllr",["$filter","$scope","$rootScope",function(c,b,a){a.pageTitle="Signin - GistOut";a.pageKeywords=c("keywordise")(a.pageTitle)+", "+baseKeywords;a.pageDescription=a.pageTitle+" - "+baseDescription;a.pageLocation=location.href;b.$on("is:logged:in",function(f,g){if(g){location.href=urlRoot;f.preventDefault()}})}]);function resizeBase64Img(b,f,a){var d=document.createElement("canvas");d.width=f;d.height=a;var e=d.getContext("2d");var c=$.Deferred();$("<img/>").attr("src","data:image/jpg;base64,"+b).load(function(){e.scale(f/this.width,a/this.height);e.drawImage(this,0,0);c.resolve($("<img/>").attr("src",d.toDataUrl()))});return c.promise()}function resetFileElement(a){a.val("");a.wrap("<form>").parent("form").trigger("reset");a.unwrap();a.prop("files")[0]=null;a.replaceWith(a.clone());$("._2squrbxprvw").attr("style","background-image: url();")}var inArray=function(c,b){var a;for(a=0;a<b.length;a++){if(c==b[a]){return true}}return false};function doesConnectionExist(){var d=new XMLHttpRequest();var b="https://gistout.com/docs/img/blank.gif";var c=Math.round(Math.random()*10000);d.open("HEAD",b+"?rand="+c,true);d.send();d.addEventListener("readystatechange",a,false);function a(f){if(d.readyState==4){if(d.status>=200&&d.status<304){Materialize.toast("connection exists!")}else{Materialize.toast("Error in connection")}}}}function log(a){console.log(a)}function init(){$(".button-collapse").sideNav({closeOnClick:true,draggable:true});$(".tooltipped").tooltip();$("ul.tabs").tabs();$(".modal").modal();$(".materialboxed").materialbox();$(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrainWidth:true,hover:false,gutter:10,belowOrigin:false,stopPropagation:false});$("input.autocomplete").autocomplete();$("._2tp").mintScrollbar({wheelSpeed:80})}var guid=function(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()};function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function gistPlaceHolder(b){var f,c,e;f='<section class="card pholder">';c=(b>5)?5:b;c=(c===0)?1:c;for(e=1;e<=c;e++){f+='<article class="loader-background">';f+='<div class="a"></div>';f+='<div class="b"></div>';f+='<div class="c"></div>';f+='<div class="d"></div>';f+='<div class="e"></div>';f+='<div class="f"></div>';f+='<div class="g"></div>';f+='<div class="h"></div>';f+='<div class="i"></div>';f+='<div class="j"></div>';f+='<div class="k"></div>';f+='<div class="l"></div>';f+='<div class="m"></div>';f+="</article>";if(e!==c){f+="<hr/>"}}f+="</section>"}var getUrlParameter=function getUrlParameter(a){var d=decodeURIComponent(window.location.search.substring(1)),c=d.split("&"),e,b;for(b=0;b<c.length;b++){e=c[b].split("=");if(e[0]===a){return e[1]===undefined?true:e[1]}}};var getRedirectParam=function(){var a;var b=decodeURIComponent(window.location.search.substring(1));a=b.split("=");return a[1]};var encodifyURI=function(a){return a.replace(" ","+")};var isInt=function(a){return Number(a)===a&&a%1===0};var isFloat=function(a){return Number(a)===a&&a%1!==0};var contains=function(c){var b=c!==c;var a;if(!b&&typeof Array.prototype.indexOf==="function"){a=Array.prototype.indexOf}else{a=function(g){var e=-1,d=-1;for(e=0;e<this.length;e++){var f=this[e];if((b&&f!==f)||f===g){d=e;break}}return d}}return a.call(this,c)>-1};var starColor=function(){return[{name:"Aluminum",color:"grey-text lighten-2"},{name:"Topaz",color:"blue-text lighten-1"},{name:"Bronze",color:"orange-text darken-2"},{name:"Silver",color:"grey-text"},{name:"Gold",color:"amber-text darken-3"},{name:"Platinum",color:"grey-text lighten-4"},{name:"Diamond",color:"grey-text lighten-5"},{name:"Adamantium",color:"grey-text darken-1"}]};var starCount=function(f){var g,a,c=0.5;var e=[];if(isFloat(f)){g=f-c;for(var b=0;b<8;b++){if(b>=g+1){e.push({color:starColor()[b].color,icon:"star_border"})}else{if((b==g)){e.push({color:starColor()[b].color,icon:"star_half"})}else{if(b<g){e.push({color:starColor()[b].color,icon:"star"})}}}}}else{for(var b=0;b<8;b++){if(b>=f){e.push({color:starColor()[b].color,icon:"star_border"})}else{if(b<f){e.push({color:starColor()[b].color,icon:"star"})}}}}return e};function writeTextFile(a,b){var c=new File(a);c.open("w");c.writeln(b);c.close()}function readTextFile(a){var c="";var b=new File(a);b.open("r");while(!b.eof){c+=b.readln()+"\n"}return c}function WriteFile(){var a=fopen("c:\\MyFile.txt",3);if(a!=-1){var b="Some text goes here...";fwrite(a,b);fclose(a)}};