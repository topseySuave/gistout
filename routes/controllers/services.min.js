"use strict";var DURATION_IN_SECONDS={epochs:["year","month","day","hour","minute"],year:31536000,month:2592000,day:86400,hour:3600,minute:60};var o={type:"GET",url:"",headers:{"Content-Type":"application/json"}};function getDuration(d){var c,a;for(var b=0;b<DURATION_IN_SECONDS.epochs.length;b++){c=DURATION_IN_SECONDS.epochs[b];a=Math.floor(d/DURATION_IN_SECONDS[c]);if(a>=1){return{interval:a,epoch:c}}}}function http(a,b){return b(a).then(successResponse,errorResponse)}function successResponse(a){return a}function errorResponse(a){return a}app.service("auth",["$http",function(a){return{signout:function(){o.url="/signout.php";return http(o,a)}}}]);app.factory("report",["$http",function(a){return{getReports:function(){o.url=baseUrl+"reports.php";return http(o,a)}}}]);app.factory("gist",["$http",function(a){return{getGist:function(b){o.url=baseUrl+"gist.php?hot_gists=true&pageHotGist="+b;return http(o,a)},gistView:function(b){o.url=urlRoot+"rest/requests/process.gist.views.php?id="+b;return http(o,a)},getGistById:function(b){o.url=baseUrl+"gist.php?id="+b;return http(o,a)},getGistBycatId:function(b,c){o.url=baseUrl+"gist.php?category_id="+b+"&pageCatId="+c;return http(o,a)},getRelatedGists:function(b){o.url=baseUrl+"gist.php?r_g="+b;return http(o,a)},getAllGistsLike:function(b){o.url=baseUrl+"gist.php?gist_with_title="+b;return http(o,a)},setHotGist:function(b){o.url=baseUrl+"gist.php?hot_gist_id="+b;return http(o,a)},unsetHotGist:function(b){o.url=baseUrl+"gist.php?unset_hot_gist_id="+b;return http(o,a)},setAsTrendGist:function(b){o.url=baseUrl+"gist.php?set_trending_gist_id="+b;return http(o,a)},unsetAsTrendGist:function(b){o.url=baseUrl+"gist.php?unset_trending_gist_id="+b;return http(o,a)},updateGist:function(d,b,c){switch(c){case"post":o.url=baseUrl+"post.php?updatePostData=true&pId="+d+"&postData="+encodeURIComponent(b);break;case"gist":o.url=baseUrl+"gist.php?updateGistData=true&gId="+d+"&gistData="+encodeURIComponent(b);break}return http(o,a)}}}]);app.factory("users",["$http",function(c){var b;return{getAllWithName:function(a){o.url=baseUrl+"getUser.php?user_with_name="+a;return http(o,c)},getUserBySess:function(){o.url=baseUrl+"getUser.php?sess=true";return http(o,c)},getUserById:function(a){o.url=baseUrl+"getUser.php?id="+a;return http(o,c)},getUserByName:function(a){o.url=baseUrl+"getUser.php?username="+a;return http(o,c)},updateProfileImg:function(a){c({url:baseUrl+"update.profile.php",data:a,method:"POST"}).then(function(d){return d},function(d){return d})},updateProfile:function(a){return c({url:"/update.profile.info.php",data:a,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(d){return d},function(d){return d})}}}]);app.factory("post",["$http",function(a){return{getPostByGistId:function(c,b){o.url=baseUrl+"post.php?gist_id="+c+"&page="+b;return http(o,a)},loadMore:function(c,b){o.url=baseUrl+"post.php?page="+c+"&gistID="+b;return http(o,a)},starred:function(b){o.url=baseUrl+"starred-post.php?user_id="+b;return http(o,a)},getAllPostsLike:function(b){o.url=baseUrl+"post.php?post_with_string="+b;return http(o,a)}}}]);app.factory("follower",["$http",function(a){return{getFollowers:function(b){o.url=baseUrl+"follow.php?followers=true&id="+b;return http(o,a)},getFollowing:function(b){o.url=baseUrl+"follow.php?following=true&id="+b;return http(o,a)}}}]);app.factory("notify",["$http",function(a){return{notify:function(){o.url=baseUrl+"notification.php";return http(o,a)},getNewNotification:function(){o.url=baseUrl+"notification.php?get_new=true";return http(o,a)},seen:function(){o.url=baseUrl+"notification.php?update_unread=true";return http(o,a)}}}]);app.factory("misc",["$location","$anchorScroll","$http",function(c,a,b){return{emoji:function(){o.url=urlRoot+"emoji-og.json";return http(o,b)},getTodaysBirthdays:function(d){o.url=baseUrl+"getUser.php?birthday=true&page="+d;return http(o,b)},dateConvert:function(p,n){var j=p.getFullYear();var i=("0"+(p.getMonth()+1)).slice(-2);var f=("0"+p.getDate()).slice(-2);var l=("0"+p.getHours()).slice(-2);var g=("0"+p.getMinutes()).slice(-2);var m=("0"+p.getSeconds()).slice(-2);var k=p.getDay();var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var h="";switch(n){case"YYYY-MM-DD":h=j+"-"+i+"-"+f;break;case"YYYY-MMM-DD DDD":h=j+"-"+e[parseInt(i)-1]+"-"+f+" "+d[parseInt(k)];break;case"DDD, DD MMM YYYY":h=d[parseInt(k)]+", "+f+" "+e[parseInt(i)-1]+" "+j;break}return h},f2Converter:function(d){d=parseFloat(d);return(d-32)/1.8},f2KConverter:function(d){d=parseFloat(d);return((d-32)/1.8)+273.15},c2fConverter:function(d){d=parseFloat(d);return(d*1.8)+32},c2kConverter:function(d){d=parseFloat(d);return d+273.15},k2Converter:function(d){d=parseFloat(d);return d-273.15},k2fConverter:function(d){d=parseFloat(d);return((d-273.15)*1.8)+32},scrollTo:function(d){c.hash(d);a()},timeSince:function(d){var g=Math.floor((new Date()-new Date(d))/1000);var f=getDuration(g);var e=(f.interval>1||f.interval===0)?"s":"";return f.interval+" "+f.epoch+e},time_ago:function(h){switch(typeof h){case"number":break;case"string":h=+new Date(h);break;case"object":if(h.constructor===Date){h=h.getTime()}break;default:h=+new Date()}var g=[[60,"seconds",1],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"Yesterday","Tomorrow"],[604800,"days",86400],[1209600,"Last week","Next week"],[2419200,"weeks",604800],[4838400,"Last month","Next month"],[29030400,"months",2419200],[58060800,"Last year","Next year"],[2903040000,"years",29030400],[5806080000,"Last century","Next century"],[58060800000,"centuries",2903040000]];var k=(+new Date()-h)/1000,e="ago",j=1;if(k==0){return"Just now"}if(k<0){k=Math.abs(k);e="from now";j=2}var d=0,f;while(f=g[d++]){if(k<f[0]){if(typeof f[2]=="string"){return f[j]}else{return Math.floor(k/f[2])+" "+f[1]+" "+e}}}return h},timeS:function(e){if(typeof e!=="object"){e=new Date(e)}var g=Math.floor((new Date()-e)/1000);var f;var d=Math.floor(g/31536000);if(d>=1){f="year"}else{d=Math.floor(g/2592000);if(d>=1){f="month"}else{d=Math.floor(g/86400);if(d>=1){f="day"}else{d=Math.floor(g/3600);if(d>=1){f="hour"}else{d=Math.floor(g/60);if(d>=1){f="minute"}else{d=g;f="second"}}}}}if(d>1||d===0){f+="s"}return d+" "+f},timeSnc:function(e){var f=Math.floor(((new Date().getTime()/1000)-e)),d=Math.floor(f/31536000);if(d>1){return d+"y"}d=Math.floor(f/2592000);if(d>1){return d+"m"}d=Math.floor(f/86400);if(d>=1){return d+"d"}d=Math.floor(f/3600);if(d>=1){return d+"h"}d=Math.floor(f/60);if(d>1){return d+"m "}return Math.floor(f)+"s"},timeAgoSince:function(j){var e=new Date();j=new Date(j*1000);var l=e.getTime()-j.getTime();l=l/1000;var d,f,h,k,g,n,i,m;if(l<=59){d=(l>1)?"s":"";return l+" second"+d}if(l>=60&&l<=3599){g=Math.floor(l/60);i=l-(g*60);f=(g>1)?"s":"";d=(i>1)?"s":"";return g+" minute"+f+" "+i+" second"+d}if(l>=3600&&l<=86399){n=Math.floor(l/3600);g=Math.floor((l-(n*3600))/60);h=(n>1)?"s":"";f=(g>1)?"s":"";return n+" hour"+h+" "+g+" minute"+f}if(l>=86400){m=Math.floor(l/86400);n=Math.floor((l-(m*86400))/60/60);k=(m>1)?"s":"";h=(n>1)?"s":"";return m+" day"+k+" "+n+" hour"+h}}}}]);