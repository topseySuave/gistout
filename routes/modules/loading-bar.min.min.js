/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
;!function(){angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(d){var c=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(x,w,v,u,t,s){function r(){v.cancel(p),s.complete(),n=0,o=0}function q(h){var l,k=w.get("$http"),j=d.defaults;!h.cache&&!j.cache||h.cache===!1||"GET"!==h.method&&"JSONP"!==h.method&&"THEN"!==h.method||(l=angular.isObject(h.cache)?h.cache:angular.isObject(j.cache)?j.cache:k);var i=void 0!==l?void 0!==l.get(h.url):!1;return void 0!==h.cached&&i!==h.cached?h.cached:(h.cached=i,i)}var p,o=0,n=0,a=s.latencyThreshold;return{request:function(b){return b.ignoreLoadingBar||q(b)||(u.$broadcast("cfpLoadingBar:loading",{url:b.url}),0===o&&(p=v(function(){s.start()},a)),o++,s.set(n/o)),b},response:function(b){return b&&b.config?(b.config.ignoreLoadingBar||q(b.config)||(n++,n>=o?(u.$broadcast("cfpLoadingBar:loaded",{url:b.config.url,result:b}),r()):s.set(n/o)),b):(t.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b)},responseError:function(b){return b&&b.config?(b.config.ignoreLoadingBar||q(b.config)||(n++,n>=o?(u.$broadcast("cfpLoadingBar:loaded",{url:b.config.url,result:b}),r()):s.set(n/o)),x.reject(b)):(t.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),x.reject(b))}}}];d.interceptors.push(c)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=0.02,this.parentSelector="body",this.spinnerTemplate="",this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(T,S,R,Q){function P(){if(J||(J=T.get("$animate")),R.cancel(H),!C){var d=S[0],c=d.querySelector?d.querySelector(G):S.find(G)[0];c||(c=d.getElementsByTagName("body")[0]);var b=angular.element(c),a=c.lastChild&&angular.element(c.lastChild);Q.$broadcast("cfpLoadingBar:started"),C=!0,y&&J.enter(F,b,a),z&&J.enter(D,b,F),O(x)}}function O(d){if(C){var c=100*d+"%";E.css("width",c),B=d,A&&(R.cancel(I),I=R(function(){N()},250))}}function N(){if(!(M()>=1)){var e=0,d=M();e=d>=0&&0.25>d?(3*Math.random()+3)/100:d>=0.25&&0.65>d?3*Math.random()/100:d>=0.65&&0.9>d?2*Math.random()/100:d>=0.9&&0.99>d?0.005:0;var f=M()+e;O(f)}}function M(){return B}function L(){B=0,C=!1}function K(){J||(J=T.get("$animate")),O(1),R.cancel(H),H=R(function(){var b=J.leave(F,L);b&&b.then&&b.then(L),J.leave(D),Q.$broadcast("cfpLoadingBar:completed")},500)}var J,I,H,G=this.parentSelector,F=angular.element(this.loadingBarTemplate),E=F.find("div").eq(0),D=angular.element(this.spinnerTemplate),C=!1,B=0,A=this.autoIncrement,z=this.includeSpinner,y=this.includeBar,x=this.startSize;return{start:P,set:O,status:M,inc:N,complete:K,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();